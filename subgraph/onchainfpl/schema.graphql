# League entity - represents a single league
type League @entity(immutable: false) {
  id: Bytes! # League contract address
  creator: Bytes!
  name: String!
  entryFee: BigInt!
  duration: BigInt!
  startTime: BigInt!
  endTime: BigInt!
  participants: [Participant!]! @derivedFrom(field: "league")
  createdAt: BigInt!
  transactionHash: Bytes!
}

# Participant entity - represents a participant in a league
type Participant @entity(immutable: false) {
  id: ID! # leagueAddress-participantAddress
  league: League!
  address: Bytes!
  fplId: BigInt # FPL team ID (0 if not registered)
  score: BigInt # FPL score (0 if not updated)
  rank: BigInt # Rank in league (0 if not finalized)
  claimableWinnings: BigInt # Prize amount
  hasClaimed: Boolean!
  joinedAt: BigInt!
}

# Event: LeagueCreated
type LeagueCreated @entity(immutable: true) {
  id: Bytes!
  leagueAddress: Bytes! # address
  creator: Bytes! # address
  name: String! # string
  entryFee: BigInt! # uint256
  duration: BigInt! # uint256
  timestamp: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

# Event: OracleUpdated
type OracleUpdated @entity(immutable: true) {
  id: Bytes!
  oldOracle: Bytes! # address
  newOracle: Bytes! # address
  timestamp: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type OwnershipTransferred @entity(immutable: true) {
  id: Bytes!
  previousOwner: Bytes! # address
  newOwner: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type Paused @entity(immutable: true) {
  id: Bytes!
  account: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type Unpaused @entity(immutable: true) {
  id: Bytes!
  account: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}
